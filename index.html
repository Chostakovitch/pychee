
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>pychee: Client for Lychee, written in Python. &#8212; pychee  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="pychee-client-for-lychee-written-in-python">
<h1>pychee: Client for Lychee, written in Python.<a class="headerlink" href="#pychee-client-for-lychee-written-in-python" title="Permalink to this heading">¶</a></h1>
</section>
<section id="pychee">
<h1>pychee<a class="headerlink" href="#pychee" title="Permalink to this heading">¶</a></h1>
<p>Client for <a class="reference external" href="https://github.com/LycheeOrg/Lychee">Lychee</a>, written in Python.</p>
<p>Lychee is a photo management system I’ve been using for years. I had the idea to make a « Lychee filesystem » with <a class="reference external" href="https://fr.wikipedia.org/wiki/Filesystem_in_Userspace">FUSE</a>, so I needed an API client.</p>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this heading">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python3<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>pychee
</pre></div>
</div>
</section>
<section id="notes">
<h2>Notes<a class="headerlink" href="#notes" title="Permalink to this heading">¶</a></h2>
<p>My reference is <a class="reference external" href="https://lycheeorg.github.io/docs/api.html">this documentation</a>.
The API is partially implemented and focused on photo management, <em>i.e.</em> only <code class="docutils literal notranslate"><span class="pre">Albums</span></code>, <code class="docutils literal notranslate"><span class="pre">Photo</span></code>, <code class="docutils literal notranslate"><span class="pre">Frame</span></code>, <code class="docutils literal notranslate"><span class="pre">Sharing</span></code> and <code class="docutils literal notranslate"><span class="pre">Settings::setLogin</span></code>. Users can do whatever they want with their albums and photos and change their password.</p>
<p>Disclaimer : I usually suck at coding, so use with caution and at your own risks.
Tested with Lychee v4.7.0. The code probably won’t be retrocompatible and should just work with the latest version.</p>
</section>
<section id="todo">
<h2>TODO<a class="headerlink" href="#todo" title="Permalink to this heading">¶</a></h2>
<p>Add tests</p>
</section>
<section id="example-usage">
<h2>Example usage<a class="headerlink" href="#example-usage" title="Permalink to this heading">¶</a></h2>
<blockquote>
<div><p>⚠️ <code class="docutils literal notranslate"><span class="pre">pychee</span></code> returns exactly what the API sends back, just parsing it to <code class="docutils literal notranslate"><span class="pre">dict</span></code> if necessary. As sample answers are not documented in the API and because answers tend to change over time, you should inspect requests in browser if your client code does not works anymore.</p>
</div></blockquote>
<p>A sample of common API calls :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># coding=utf-8</span>
<span class="kn">from</span> <span class="nn">pychee</span> <span class="kn">import</span> <span class="n">pychee</span>

<span class="c1"># Initialize instance</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">pychee</span><span class="o">.</span><span class="n">LycheeClient</span><span class="p">(</span><span class="s1">&#39;https://pic.chosto.me&#39;</span><span class="p">)</span>

<span class="c1"># Login</span>
<span class="n">client</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="s1">&#39;login&#39;</span><span class="p">,</span> <span class="s1">&#39;password&#39;</span><span class="p">)</span>

<span class="c1"># Create a new album</span>
<span class="n">album_name</span> <span class="o">=</span> <span class="s1">&#39;test_name&#39;</span>
<span class="n">album_id</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">add_album</span><span class="p">(</span><span class="n">album_name</span><span class="p">)[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span>

<span class="c1"># Add a photo in the created album</span>
<span class="n">path_to_your_photo</span> <span class="o">=</span> <span class="s1">&#39;/your/path/photo.jpg&#39;</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path_to_your_photo</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">photo_id</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">add_photo</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s1">&#39;photo.jpg&#39;</span><span class="p">,</span> <span class="n">album_id</span><span class="p">)[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span>

<span class="c1"># Set uploaded photo public</span>
<span class="n">client</span><span class="o">.</span><span class="n">set_photo_public</span><span class="p">(</span><span class="n">photo_id</span><span class="p">)</span>

<span class="c1"># Set licence of uploaded photo</span>
<span class="n">client</span><span class="o">.</span><span class="n">set_photo_license</span><span class="p">(</span><span class="n">photo_id</span><span class="p">,</span> <span class="s1">&#39;CC0&#39;</span><span class="p">)</span>

<span class="c1"># Download an archive of the created album</span>
<span class="n">output_path</span> <span class="o">=</span> <span class="s1">&#39;/tmp/photos.zip&#39;</span>
<span class="k">with</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="n">output_path</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">))</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
     <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">client</span><span class="o">.</span><span class="n">get_albums_archive</span><span class="p">([</span><span class="n">album_id</span><span class="p">]))</span>

<span class="c1"># Logout</span>
<span class="n">client</span><span class="o">.</span><span class="n">logout</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="documentation">
<h2>Documentation<a class="headerlink" href="#documentation" title="Permalink to this heading">¶</a></h2>
<p>Documentation is automatically published there : https://chostakovitch.github.io/pychee/index.html</p>
</section>
<section id="api-documentation">
<h2>API Documentation<a class="headerlink" href="#api-documentation" title="Permalink to this heading">¶</a></h2>
<p><a class="reference external" href="https://chostakovitch.github.io/pychee/pychee.html"><img alt="link_image" src="https://cdn1.iconfinder.com/data/icons/programming-37/32/03_Api_programming_code_gear_website-512.png" /></a></p>
<section id="manually-install-from-github-as-a-python-package">
<h3>Manually Install from GitHub as a Python Package<a class="headerlink" href="#manually-install-from-github-as-a-python-package" title="Permalink to this heading">¶</a></h3>
<p>To install <code class="docutils literal notranslate"><span class="pre">pychee</span></code> from GitHub:</p>
<ol class="arabic simple">
<li><p>Download the repository as a zipped package.</p></li>
<li><p>Unzip the repository.</p></li>
<li><p>Open a terminal (command-prompt) and navigate to the new folder that’s been unzipped.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">pip</span></code> or <code class="docutils literal notranslate"><span class="pre">python</span></code> to install with the following command : <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">.</span></code></p></li>
<li><p>Verify that it’s been installed by opening a Python instance and importing:
<code class="docutils literal notranslate"><span class="pre">&gt;&gt;&gt;</span> <span class="pre">import</span> <span class="pre">pychee</span></code> If no errors arise, the package has been installed.</p></li>
</ol>
</section>
<section id="manually-install-from-github-as-a-standalone-file">
<h3>Manually Install from GitHub as a Standalone File<a class="headerlink" href="#manually-install-from-github-as-a-standalone-file" title="Permalink to this heading">¶</a></h3>
<p>If you wish to use <code class="docutils literal notranslate"><span class="pre">pychee</span></code> as a standalone file in your Python project, you can
simply download the <code class="docutils literal notranslate"><span class="pre">pychee.py</span></code> file from GitHub (you’ll want
<a class="reference external" href="https://github.com/Chostakovitch/pychee/blob/main/pychee/pychee.py">this file</a>
exactly) and save it wherever you need it! Then, just <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">pychee</span></code> and away
you go!</p>
</section>
</section>
<section id="license">
<h2>License<a class="headerlink" href="#license" title="Permalink to this heading">¶</a></h2>
<p><a class="reference external" href="https://github.com/Chostakovitch/pychee/blob/main/LICENSE">AGPL-3.0</a></p>
</section>
<section id="contributing">
<h2>Contributing<a class="headerlink" href="#contributing" title="Permalink to this heading">¶</a></h2>
<p>Want to get involved? We’d love to have your help!</p>
<p>Please help us by identifying any issues that you come across. If you find an
error, bug, or just have questions, jump over to the
<a class="reference external" href="https://github.com/Chostakovitch/pychee/issues">issue</a> page.</p>
<p>If you want to add features, or contribute yourself, feel free to open a
pull-request.</p>
</section>
<section id="source-repository">
<h2>Source Repository<a class="headerlink" href="#source-repository" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>GitHub: https://github.com/Chostakovitch/pychee</p></li>
</ul>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="#">pychee</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="#">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021, Chostakovitch, engineerjoe440.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 6.1.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="_sources/index.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>